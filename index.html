<!DOCTYPE html>
<html>
<head>
	<title>drive api</title>
</head>
<body>

<div class="container">
  <h2>Profile</h2>
  <form>
    <div class="form-group">
     <label for="name">Name</label>
     <input  type="name" class="form-control" id="name">
    </div> 
    <div class="form-group">
     <label for="username">username</label>
     <input  type="username" class="form-control" id="username">
    </div> 
    <div class="form-group">
      <label for="profile">Profile photo</label>
      <input type="fileList" onchange="readFiles(event)">
    </div>
    <button type="submit" class="btn btn-default">Upload</button>
  </form>
  <button onclick="window.location.href='./profile.html'" class="btn btn-default">Show Profile</button>
</div>

<!-- bootstrap support files -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<!--adding firebase support -->

<script src="https://www.gstatic.com/firebasejs/3.7.3/firebase.js"></script>
<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyCH-0GLL2D0glqgJUpEs64J52DlEkIM70Y",
    authDomain: "profile-6eb1e.firebaseapp.com",
    databaseURL: "https://profile-6eb1e.firebaseio.com",
    storageBucket: "profile-6eb1e.appspot.com",
    messagingSenderId: "587990979178"
  };
  firebase.initializeApp(config);
   // Get a reference to the storage service, which is used to create references in your storage bucket
  var storage = firebase.storage();
  // Points to the root reference
var storageRef = firebase.storage().ref();

// Points to 'images'
var imagesRef = storageRef.child('images');

// Points to 'images/profile.jpg'
// Note that you can use variables to create child values
var fileName = 'profile.jpg';
var spaceRef = imagesRef.child(fileName);

// File path is 'images/space.jpg'
var path = spaceRef.fullPath

// File name is 'space.jpg'
var name = spaceRef.name

// Points to 'images'
var imagesRef = spaceRef.parent;

function readFiles(event) {
    var fileList = event.target.files;
  }
    var uploadTask = storageRef.child('images/' + fileList.name).put(fileList);
    // Listen for state changes, errors, and completion of the upload.
uploadTask.on(firebase.storage.TaskEvent.state_changed,function(snapshot) {
  },  function() {
  // Upload completed successfully, now we can get the download URL
  var downloadURL = uploadTask.snapshot.downloadURL;
  console.log(downloadURL); 

});


</script>
</body>
</html>